{% extends "_main.jinja" %}

{% block title %} pay {% endblock %}


{% block main %}
        <section class="amount">
            {% if cart.currency == "EUR" %}
            €
            {% elif cart.currency == "USD" %}
            $
            {% elif cart.currency == "GBP" %}
            £
            {% endif %}
            {{ cart.getFormattedAmount(cart.amount) }}
        </section>

        <section class="uuid">
            Email for Receipt
            <form class="uuid" action="{{ url_for('viewLpn') }}" method="POST">
                <input type="email" placeholder="email" name="email" id=email/>
            </form>
        </section>

        {% if cart != None %}
        <section class="cart">
            <h3>
                Parking Ticket
            </h3>
            <ol>
                <li class="lpn">
                    LPN
                    <span>
                    {% if lpn != None %}
                        {{ cart.lpn }}
                    {% endif %}
                    </span>
                </li>
                <li class="epan">
                    EPAN
                    <span>
                        {{ cart.epan }}
                    </span>
                </li>
                <li>
                    UUID
                    <span>
                        {{ cart.id }}
                    </span>
                </li>
                <li>
                    from
                    <span>
                        {{ cart.entryTime.strftime("%d.%m.%Y %H:%M:%S") }}
                    </span>
                </li>
                <li>
                    to
                    <span>
                        {{ cart.authorizeTime.strftime("%d.%m.%Y %H:%M:%S") }}
                    </span>
                </li>
                <li class="divide"></li>
            </ol>

            <h2>
                Total
                <span>
                    {% if cart.currency == "EUR" %}
                        €
                        {% elif cart.currency == "USD" %}
                        $
                        {% elif cart.currency == "GBP" %}
                        £
                    {% endif %}
                    {{ cart.getFormattedAmount(cart.amount) }}
                </span>
            </h2>
        </section>

        <section class="pay">
            <a href="{{url_for('viewCarts')}}{{ cart.id }}?lpn=ZA123AZ&epan=02491012010011033016399610&amount=700&currency=EUR&entry=20230226131545&authorize=20230318152535">
                <button>
                    Continue
                </button>
            </a>
        </section>

        <footer>
            You will be redirected to S&B PGS - Payment Gateway Service
        </footer>

        {% else %}
        <section class="cart">
            <h3>
                Oooops !!!
            </h3>
            <ol>
                <li class="lpn">
                    LPN: {% if lpn != None %} {{ lpn }} {% endif %}
                    <span>
                        not found
                    </span>
                </li>
            </ol>
        </section>
        {% endif %}

{% endblock %}